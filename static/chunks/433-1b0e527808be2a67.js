(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{7790:()=>{},8116:(e,a,t)=>{"use strict";t.d(a,{F:()=>n});let n=new(t(7369)).Connection("https://light-wider-bird.solana-mainnet.quiknode.pro/0fa02f9109ca0c0e8a990f73ca03664b2d3e4138","confirmed")},22:(e,a,t)=>{"use strict";t.d(a,{vW:()=>l,vN:()=>m,VQ:()=>g,w5:()=>I,nb:()=>E,_U:()=>M,Sp:()=>b,zJ:()=>h,TL:()=>y,BZ:()=>O,B4:()=>p,Vo:()=>S,R3:()=>w,H3:()=>v,we:()=>P,HP:()=>T});var n=t(7369),s=t(4564);let o=JSON.parse('{"version":"0.1.0","name":"staking","instructions":[{"name":"initPool","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"escrowFee","isMut":false,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"mint","isMut":false,"isSigner":false},{"name":"payerTokenAccount","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"withdrawTokens","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"stakeMint","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"depositeTokens","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"stakeMint","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"transferOwner","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"newOwner","type":"publicKey"}]},{"name":"initEntry","accounts":[{"name":"stakeEntry","isMut":true,"isSigner":false},{"name":"stakePool","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"stakeTokens","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"stakeEntry","isMut":true,"isSigner":false},{"name":"stakeMint","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"unstakeTokens","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"stakeEntry","isMut":true,"isSigner":false},{"name":"stakeMint","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"claimTokens","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"stakeEntry","isMut":true,"isSigner":false},{"name":"stakeMint","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"transferBack","accounts":[{"name":"stakePool","isMut":true,"isSigner":false},{"name":"poolTokenAccount","isMut":true,"isSigner":false},{"name":"stakeEntry","isMut":true,"isSigner":false},{"name":"stakeMint","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":true},{"name":"receiverTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"StakeEntry","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"pool","type":"publicKey"},{"name":"lastStaker","type":"publicKey"},{"name":"lastStakedAt","type":{"option":"i64"}},{"name":"amount","type":"u64"},{"name":"rewards","type":"u64"},{"name":"claimed","type":"u64"}]}},{"name":"StakePool","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"authority","type":"publicKey"},{"name":"totalStaked","type":"u64"},{"name":"totalStakers","type":"u32"},{"name":"mint","type":"publicKey"},{"name":"escrowFee","type":"publicKey"},{"name":"apr","type":"u64"}]}}],"errors":[{"code":6000,"name":"InvalidStakePool","msg":"Invalid stake pool"},{"code":6001,"name":"InvalidStakeEntry","msg":"Invalid stake entry"},{"code":6002,"name":"InvalidAuthority","msg":"Invalid stake pool authority"},{"code":6003,"name":"InvalidEscrow","msg":"Mismatched user and escrow"},{"code":6004,"name":"InvalidStakeMint","msg":"Invalid stake mint"},{"code":6005,"name":"TokensAlreadyStaked","msg":"Tokens Already Staked"},{"code":6006,"name":"InvalidPaymentShare","msg":"Invalid payment share"},{"code":6007,"name":"InvalidPaymentTokenAccount","msg":"Invalid payment token account"},{"code":6008,"name":"InvalidPayerTokenAccount","msg":"Invalid payer token account"},{"code":6009,"name":"InvalidUserStakeMintTokenAccount","msg":"Invalid User Stake Mint Token Account"},{"code":6010,"name":"MinStakeSecondsNotSatisfied","msg":"Minimum stake seconds not satisfied"},{"code":6011,"name":"InvalidUnstakeAmount","msg":"Invalid Unstake Amount"},{"code":6012,"name":"NotEnoughRewards","msg":"Not Enough Rewards"},{"code":6013,"name":"InvalidAmount","msg":"minimum stake amount is 10"}],"metadata":{"address":"5KA8qSGEJ9c8nNnEqcS5G5Wwsc8S7dzVgb49mUU5ZBUi"}}');var i=t(8116),r=t(1214),u=t(2200);let l=new n.PublicKey("51BdrKtMtLhyC7c7LxikLX4z4d433jsmNXaf5t5bYLyb"),m=new n.PublicKey("BCTJnXmpYpmnozJb2eYykzPnVnV8cSABXXd71iJN8s7t"),c=new n.PublicKey("7LqRw17YaP7AKy1NB6vgFWEGKgL9jcEHejiXrYM78p7H"),d=(0,r.Ob)(m,c),g=1e6,k=e=>new s.NQ(i.F,e,{preflightCommitment:"processed"}),y=async e=>{let a=k(e),t=new s.BP(o,o.metadata.address,a);return await t.account.stakePool.all()},f=async(e,a)=>{let t=k(e),n=new s.BP(o,o.metadata.address,t);return await n.account.stakePool.fetch(a)},p=async e=>{let a=k(e),t=new s.BP(o,o.metadata.address,a);return await t.account.stakeEntry.all([{memcmp:{offset:41,bytes:e.publicKey.toString()}}])},S=async(e,a)=>{try{let t=k(e),i=new s.BP(o,o.metadata.address,t),l=n.PublicKey.findProgramAddressSync([s.Wp.bytes.utf8.encode("stake-pool")],i.programId)[0];console.log("stake_pool:",l.toString());let g=await (0,r.Ob)(m,l,!0),y=await (0,r.Ob)(m,e.publicKey),f=await i.methods.initPool(new s.BN(a)).accounts({stakePool:l,poolTokenAccount:g,mint:m,payerTokenAccount:y,payer:e.publicKey,escrowFee:c,escrowTokenAccount:await d,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return new n.Transaction().add(f)}catch(e){console.log(e)}},w=async(e,a)=>{try{let t=k(e),c=new s.BP(o,o.metadata.address,t),g=await f(e,l),y=new n.Transaction,p=K(l,null==e?void 0:e.publicKey),S=await i.F.getAccountInfo(p);if(null===S){let a=await A(e,l,p);y.add(a)}let w=await (0,r.Ob)(null==g?void 0:g.mint,l,!0),P=await (0,r.Ob)(null==g?void 0:g.mint,null==e?void 0:e.publicKey),M=await (0,r.b6)(i.F,new n.PublicKey(m)),T=parseInt("1"+"0".repeat(M.decimals)),b=await c.methods.stakeTokens(new s.BN(a*T)).accounts({stakePool:l,poolTokenAccount:w,stakeEntry:p,stakeMint:null==g?void 0:g.mint,user:e.publicKey,userTokenAccount:P,escrowTokenAccount:await d,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return y.add(b),y}catch(e){console.log(e)}},P=async(e,a)=>{try{let t=k(e),i=new s.BP(o,o.metadata.address,t),m=await f(e,l),c=new n.Transaction,y=K(l,null==e?void 0:e.publicKey),p=await (0,r.Ob)(null==m?void 0:m.mint,null==e?void 0:e.publicKey),S=await (0,r.Ob)(null==m?void 0:m.mint,l,!0),w=await i.methods.unstakeTokens(new s.BN(a*g)).accounts({stakePool:l,poolTokenAccount:S,stakeEntry:y,stakeMint:null==m?void 0:m.mint,user:e.publicKey,escrowTokenAccount:await d,userTokenAccount:p,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return c.add(w),c}catch(e){console.log(e)}},M=async e=>{try{let a=k(e),t=new s.BP(o,o.metadata.address,a),i=await f(e,l),m=new n.Transaction,c=K(l,null==e?void 0:e.publicKey),g=await (0,r.Ob)(null==i?void 0:i.mint,null==e?void 0:e.publicKey),y=await (0,r.Ob)(null==i?void 0:i.mint,l,!0),p=await t.methods.claimTokens().accounts({stakePool:l,poolTokenAccount:y,stakeEntry:c,stakeMint:null==i?void 0:i.mint,user:e.publicKey,userTokenAccount:g,escrowTokenAccount:await d,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return m.add(p),m}catch(e){console.log(e)}},T=async(e,a)=>{try{let t=k(e),i=new s.BP(o,o.metadata.address,t),m=await f(e,l),c=new n.Transaction,d=await (0,r.Ob)(null==m?void 0:m.mint,null==e?void 0:e.publicKey),y=await (0,r.Ob)(null==m?void 0:m.mint,l,!0),p=await i.methods.withdrawTokens(new s.BN(a*g)).accounts({stakePool:l,poolTokenAccount:y,stakeMint:null==m?void 0:m.mint,user:e.publicKey,userTokenAccount:d,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return c.add(p),c}catch(e){console.log(e)}},b=async(e,a)=>{try{let t=k(e),i=new s.BP(o,o.metadata.address,t),m=await f(e,l),c=new n.Transaction,d=await (0,r.Ob)(null==m?void 0:m.mint,null==e?void 0:e.publicKey),y=await (0,r.Ob)(null==m?void 0:m.mint,l,!0),p=await i.methods.depositeTokens(new s.BN(a*g)).accounts({stakePool:l,poolTokenAccount:y,stakeMint:null==m?void 0:m.mint,user:e.publicKey,userTokenAccount:d,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return c.add(p),c}catch(e){console.log(e)}},v=async(e,a)=>{try{let t=k(e),i=new s.BP(o,o.metadata.address,t),m=await f(e,l),c=new n.Transaction,d=K(l,a),g=await (0,r.Ob)(null==m?void 0:m.mint,l,!0),y=await (0,r.Ob)(null==m?void 0:m.mint,a),p=await i.methods.transferBack().accounts({stakePool:l,poolTokenAccount:g,stakeEntry:d,stakeMint:null==m?void 0:m.mint,user:e.publicKey,receiverTokenAccount:y,tokenProgram:u.x5,associatedTokenProgram:u.EK,systemProgram:n.SystemProgram.programId}).instruction();return c.add(p),c}catch(e){console.log(e)}},A=async(e,a,t)=>{let i=k(e),r=new s.BP(o,o.metadata.address,i);return await r.methods.initEntry().accounts({stakeEntry:t,stakePool:a,payer:e.publicKey,systemProgram:n.SystemProgram.programId}).instruction()},K=(e,a)=>n.PublicKey.findProgramAddressSync([s.Wp.bytes.utf8.encode("stake-entry"),e.toBuffer(),a.toBuffer()],new n.PublicKey(o.metadata.address))[0];function h(e){let a=e.toString(),t=a.indexOf(".");if(-1===t)return parseFloat(a);let n=a.slice(0,t),s=a.slice(t+1,t+3);return parseFloat(s.length>0?"".concat(n,".").concat(s):n)}function E(e,a){return .0019933*e*B(a)}function I(e,a){return e*Math.pow(1.0019933,2*a)-e}let B=e=>{let a=new Date(1e3*e),t=new Date,n=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),s=a.getUTCHours();return Math.floor((n-new Date(s>=0&&s<12?a.setUTCHours(0,0,0,0):a.setUTCHours(12,0,0,0)).getTime())/432e5)},O=e=>{let a=e.match(/custom program error: 0x([0-9a-fA-F]+)/);if(!a||!a[1])return e;{let e=parseInt(a[1],16);return console.log(e),(1===e||3012===e?"Not Enough Balance in Wallet":function(e){let a=o.errors.find(a=>a.code===e);return a?a.msg:"Unknown error code"}(e))||"Error message not found for the provided error code"}}}}]);